<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1.0" />
<title>Persistent Timer</title>
<style>
  html, body {
    margin: 0;
    padding: 0;
    height: 100%;
    background-color: black;
    color: #ffa500; /* yellowish-orange */
    display: flex;
    align-items: center;
    justify-content: center;
    flex-direction: column;
    font-family: 'Courier New', monospace;
    font-size: 6rem;
  }

  #timer {
    user-select: none;
  }

  #controls {
    margin-top: 20px;
  }

  button {
    background: #ffa500;
    border: none;
    color: black;
    padding: 10px 20px;
    margin: 0 10px;
    font-size: 1rem;
    border-radius: 8px;
    cursor: pointer;
    transition: 0.2s;
  }

  button:hover {
    background: #ffb733;
  }

  .hidden {
    display: none;
  }
</style>
</head>
<body>
  <div id="timer">00:00:00</div>
  <div id="controls">
    <button id="startBtn">Start</button>
    <button id="stopBtn">Stop</button>
    <button id="resetBtn">Reset</button>
  </div>

  <script>
    const timerDisplay = document.getElementById("timer");
    const startBtn = document.getElementById("startBtn");
    const stopBtn = document.getElementById("stopBtn");
    const resetBtn = document.getElementById("resetBtn");
    const controls = document.getElementById("controls");

    let startTime = localStorage.getItem("startTime");
    let elapsed = parseInt(localStorage.getItem("elapsed")) || 0;
    let running = localStorage.getItem("running") === "true";
    let interval;

    function updateTimer() {
      const now = Date.now();
      const diff = running ? elapsed + (now - startTime) : elapsed;
      const totalSeconds = Math.floor(diff / 1000);
      const hours = String(Math.floor(totalSeconds / 3600)).padStart(2, '0');
      const minutes = String(Math.floor((totalSeconds % 3600) / 60)).padStart(2, '0');
      const seconds = String(totalSeconds % 60).padStart(2, '0');
      timerDisplay.textContent = `${hours}:${minutes}:${seconds}`;
    }

    function startTimer() {
      if (!running) {
        startTime = Date.now();
        localStorage.setItem("startTime", startTime);
        running = true;
        localStorage.setItem("running", "true");
        interval = setInterval(updateTimer, 1000);
      }
    }

    function stopTimer() {
      if (running) {
        elapsed += Date.now() - startTime;
        localStorage.setItem("elapsed", elapsed);
        running = false;
        localStorage.setItem("running", "false");
        clearInterval(interval);
      }
    }

    function resetTimer() {
      clearInterval(interval);
      startTime = null;
      elapsed = 0;
      running = false;
      localStorage.clear();
      timerDisplay.textContent = "00:00:00";
    }

    // Restore state on load
    if (running) {
      interval = setInterval(updateTimer, 1000);
    }
    updateTimer();

    startBtn.addEventListener("click", startTimer);
    stopBtn.addEventListener("click", stopTimer);
    resetBtn.addEventListener("click", resetTimer);

    // Toggle controls visibility with Alt + Enter
    document.addEventListener("keydown", (e) => {
      if (e.altKey && e.key === "Enter") {
        controls.classList.toggle("hidden");
      }
    });
  </script>
</body>
</html>
